<?xml version="1.0" encoding="ISO-8859-1" ?>

<!--
	Java Game Framework Global Configuration File
 --> 	

<jgf>

	<!-- Application configuration -->
	<application>
	
		<name>Taunklet</name>
		<version>1.0</version>
		<networkProtocolVersion>1.0</networkProtocolVersion>
		<debug>true</debug>
		
		<description>
			Java Game Framework: Tanks Example Game
		</description>
		
		<engine ref="engine" />
		
	</application>

	<!-- 
		Logging configuration
	 -->
	<service id="logging" class="net.jgf.util.system.LoggingConfigService">
		<logger name="com.jme.scene.Node" level="WARN" />
		<logger name="com.jme.scene.Point" level="WARN" />
		<logger name="com.jme.scene.Line" level="WARN" />
		<logger name="net.jgf.loader.FileChainLoader" level="WARN" />				
	</service>
	
	<!-- 
		Engine service
	 -->
	<service id="engine" class="net.jgf.jme.engine.JMEEngine">

		<timerCap>0.05</timerCap>
		<collectStats>${application/debug}</collectStats>
		
		<logicManager ref="logic" />
		<viewManager ref="view" />
		
	</service>
	
	
	<service id="settings" class="net.jgf.settings.SettingsManager">
		
		<caseSensitive>true</caseSensitive>
	
		<settings>
			<setting id="settings.network.dedicatedServer" class="java.lang.Boolean"  
					 label="Dedicated Server" default="false" />
			<setting id="video.gamma" class="java.lang.Float"
					 label="Video Gamma" default="1.0f" />
			
			<setting id="settings.input.mouse.accel" class="java.lang.Float" 
					 label="Mouse Accel" default="0.0f" />
			<setting id="settings.input.mouse.sensitivity" class="java.lang.Float" 
					 label="Mouse Accel" default="0.0f" />					 

			<setting id="settings.input.key.up" class="net.jgf.config.ConfigKey" 
					 label="Move Up" default="KEY_W" />
			<setting id="settings.input.key.down" class="net.jgf.config.ConfigKey" 
					 label="Move Down" default="KEY_S" />
			<setting id="settings.input.key.left" class="net.jgf.config.ConfigKey" 
					 label="Move Left" default="KEY_A" />
			<setting id="settings.input.key.right" class="net.jgf.config.ConfigKey" 
					 label="Move Right" default="KEY_D" />
					 
			<setting id="settings.input.key.screenshot" class="net.jgf.config.ConfigKey" 
					 label="Move Right" default="KEY_F1" />					 
			<setting id="settings.input.key.console" class="net.jgf.config.ConfigKey" 
					 label="Move Right" default="KEY_TILDE" />
			
			<setting id="settings.game.level" class="net.jgf.config.ConfigEnum"
					 label="Difficulty Level" default="medium">
					 <value key="easy" label="Easy" />
					 <value key="medium" label="Medium" />
					 <value key="hard" label="Hard" />
			</setting>
			
			<setting id="settings.player.name" class="net.jgf.config.ConfigString" 
					 label="Player Name" default="UnnamedTank" />
			
		</settings>
	
	</service>
	
	<!-- 
	<service id="settingsStorage" class="net.jgf.settings.storage.PropertiesFileSettingsStorage">
		<path>$HOME/taunklet.properties</path>
		<settings ref="settings" />
	</service>
	 -->	
	
	<service id="console" class="net.jgf.console.StreamConsoleWrapper">
		<service id="console/wrapped" class="net.jgf.console.bean.BeanshellConsole" >
	
			<bean name="settings" class="net.jgf.console.bean.SettingsBean" >
				<settings ref="settings" />
			</bean>
			
		</service>
	</service>
	
	<!-- 
	<service id="commandLine" class="net.jgf.cli.DefaultCliProcessor">
		<allowConsoleExpressions>true</allowConsoleExpressions>
	</service>

	<service id="minimalSettings" class="net.jgf.settings.dialog.StandardGameDialog">
		<image>texture/logo/indoorbattles-dialog.png</image>
		<displayCondition>onFailureOrHardwareChange</displayCondition>
	</service>
	 -->
	
	<!-- 
		Entity Manager: Just create the groups as entities are 
		added dynamically or by loaders.
	 -->
	<service id="entity" class="net.jgf.entity.DefaultEntityManager">
		
		<entity id="entity/root" class="net.jgf.entity.EntityGroup" >

			<entity id="entity/root/players" class="net.jgf.entity.EntityGroup">
			</entity>
			
			<entity id="entity/root/enemy" class="net.jgf.entity.EntityGroup">
			</entity>
			
			<entity id="entity/root/bullets" class="net.jgf.entity.EntityGroup">
			</entity>
			
			<entity id="entity/root/mine" class="net.jgf.entity.EntityGroup">
			</entity>
			
		</entity>
			
	</service> 
		
	
	<!--
		Scene Manager: Default Scene Manager. Don't define the scene as it will be loaded
		during runtime.
	 -->
	<service id="scene/manager" class="net.jgf.scene.SimpleSceneManager">
	</service>
	
	<!--
		Model Loading: Model loader system configuration.
	 -->
	<service id="loader" class="net.jgf.loader.DefaultLoaderManager">
		
		<!-- This chain provides model loading and caching and also rotates the
		loaded nodes to correct the orientation used in blender to design models for this game -->
		<loader id="loader/model" class="net.jgf.loader.ChainLoader" >
			
			<loader id="loader/model/converter" class="net.jgf.jme.loader.model.ConverterLoader" />
		
			<loader id="loader/model/transformer" class="net.jgf.jme.loader.model.SpatialTransformerLoader" >
				<property name="SpatialTransformerLoader.rotatePi" value="-0.5 0.0 0.0" />
			</loader>
			
		</loader>
		
		<!-- The scene loader is a FileChain loader: loads a chain of loaders from a file (which
		defines the level). See the level configuration to see the each level's loading chain -->
		<loader id="loader/scene" class="net.jgf.loader.FileChainLoader">
			<property name="TanksSceneLoader.sceneManager" value="scene/manager" />
		</loader>
		
		<loader id="loader/scene/referencesprocessor" class="net.jgf.example.tanks.loader.SceneReferencesProcessorLoader">
			<reference regexp="a.*" type="entity" target="entity/root/enemies">
				<loader id="!loader/scene/referencesprocessor/enemy-a" class="net.jgf.loader.ReferenceLoader" >
					<property name="ReferenceLoader.loader" value="loader/entity" />
					<property name="FileChainLoader.resourceUrl" value="tanks/entity/tank-a.xml" />
				</loader>
			</reference>
		</loader>
		
		<!--  The EntityLoader used is a FileChainLoader: reads a chain of loaders from a file -->
		<loader id="loader/entity" class="net.jgf.loader.FileChainLoader">
			<property name="EntityModelLoader.loader" value="loader/model" />
		</loader>
		
		<!-- This entity loader is an alternative entity loader that pools entities: it wraps
		 the non-pooled entity loader for this game -->
		<loader id="loader/entity/pool" class="net.jgf.loader.entity.pool.EntityPoolLoader">
			
			<loader ref="loader/entity" />
			
			<pool id="loader/entity/pool/bullet" class="net.jgf.loader.entity.pool.EntityPool">
				<key>FileChainLoader.resourceUrl</key>
				<value>tanks/entity/bullet.xml</value>
				<maxInstances>200</maxInstances>
 			</pool>
			
		</loader>		
				
	</service>
	
	<!-- 
		Logic Manager: contains the logic state tree.
	 -->
	<service id="logic" class="net.jgf.logic.DefaultLogicManager">
	
		<logic id="logic/root" class="net.jgf.logic.ExclusiveLogicNode">
			
			<logic id="logic/action" class="net.jgf.logic.LogicStateNode" 
				autoActivate="false">
				
				<logic id="logic/action/newgame" class="net.jgf.logic.action.control.ControllerAction" >
					<step type="deactivateAndUnload" ref="view/root/main" />
					<step type="runAction" ref="logic/action/newgame/init" />
					<step type="runAction" ref="logic/action/restart" />
				</logic>
				
				<logic id="logic/action/newgame/init" class="net.jgf.example.tanks.logic.NewGameAction" >
				</logic>
				
				<logic id="logic/action/restart" class="net.jgf.example.tanks.logic.RestartAction" >
				</logic>				
				
				<logic id="logic/action/showmenu" class="net.jgf.logic.action.control.ControllerAction" >
					<step type="loadAndActivate" ref="view/root/main" />
				</logic>
				
				<logic id="logic/action/quit" class="net.jgf.logic.action.QuitAction" />
				
			</logic>
			
			<logic id="logic/root/ingame" class="net.jgf.logic.LogicStateNode" >
				
				<logic id="logic/root/ingame/spawn" class="net.jgf.example.tanks.logic.SpawnLogic"
					autoLoad="true" autoActivate="true" >
				</logic>
			
				<logic id="logic/root/ingame/ingame" class="net.jgf.example.tanks.logic.InGameLogic"
					autoLoad="true" autoActivate="true" > 
				</logic>
				
				<logic id="logic/root/ingame/mission" class="net.jgf.example.tanks.logic.MissionLogic"
					autoLoad="true" autoActivate="true" >
				</logic>				
			
			</logic>
			
		</logic>
		
	</service>
	
	<!-- 
		View Manager: contains the view state tree.
	 -->
	<service id="view" class="net.jgf.view.DefaultViewManager" depends="engine">

		<view id="view/root" class="net.jgf.view.ViewStateNode">

			<view id="view/root/intro" class="net.jgf.view.ViewSequencerNode" 
				autoLoad="true" autoActivate="true" >
				
				<unloadOnFinish>true</unloadOnFinish>

				<!-- 
				<view id="view/root/intro/fader1" class="net.jgf.jme.view.FaderViewNode"
					autoLoad="true" autoActivate="true" >
				
					<fadeInTime>3.0</fadeInTime>
					<fadeOutTime>0.8</fadeOutTime>
					<autoFadeOutTime>3.0</autoFadeOutTime>
					<allowKeyToSkip>true</allowKeyToSkip>
					<color>0.0 0.0 0.0</color>
					
					<view id="view/root/intro/tech" class="net.jgf.jme.view.display.DisplayItemsView" 
						autoLoad="true" autoActivate="true">
						
						<item id="view/root/intro/tech/1" class="net.jgf.jme.view.display.ImageItem">
							<center>-0.66 0.5 0.0</center>
							<textureUrl>tanks/texture/logo/tech-jme.png</textureUrl>
							<size>1.0</size>
						</item>
						<item id="view/root/intro/tech/2" class="net.jgf.jme.view.display.ImageItem">
							<center>0.0 0.5 0.0</center>
							<textureUrl>tanks/texture/logo/tech-jme.png</textureUrl>
							<size>0.8</size>
						</item>
						<item id="view/root/intro/tech/3" class="net.jgf.jme.view.display.ImageItem">
							<center>0.66 0.5 0.0</center>
							<textureUrl>tanks/texture/logo/tech-jme.png</textureUrl>
							<size>0.5</size>
						</item>
						<item id="view/root/intro/tech/text" class="net.jgf.jme.view.display.TextItem">
							<center>0.0 -0.8 0.0</center>
							<size>0.03</size>
							<font>Verdana PLAIN 40</font>
							<text>Created with "JGF - Java Game Framework" - http://code.google.com/p/jgf/ 
							</text>
						</item>			
						<item id="view/root/intro/tech/text2" class="net.jgf.jme.view.display.TextItem">
							<center>0.0 -0.87 0.0</center>  
							<size>0.03</size>
							<font>Verdana PLAIN 40</font>
							<text>(c) 2008-2009 JGF - Published under the BSD license</text>
						</item>	
					</view>
					
				</view>
				
				<view id="view/root/intro/fader2" class="net.jgf.jme.view.FaderViewNode"
					autoLoad="true" autoActivate="false" >
				
					<fadeInTime>1.5</fadeInTime>
					<fadeOutTime>0.8</fadeOutTime>
					<autoFadeOutTime>4.0</autoFadeOutTime>
					<allowKeyToSkip>true</allowKeyToSkip>
					<color>0.0 0.0 0.0</color>
					
					<view id="view/root/intro/logo" class="net.jgf.jme.view.display.DisplayItemsView" 
						autoLoad="true" autoActivate="true">
						
						<item id="view/root/intro/logo/tanks" class="net.jgf.jme.view.display.ImageItem">
							<center>0.0 0.2 0.0</center>
							<textureUrl>tanks/texture/logo/tanks-logo.png</textureUrl>
							<size>0.75</size>
						</item>
						
						<item id="view/root/intro/logo/title" class="net.jgf.jme.view.display.TextItem">
							<center>-0.00 -0.3 0.0</center>
							<size>0.25</size>
							<font>Verdana BOLD 40</font>
							<text>T a u n k l e t</text>
						</item>	
						
					</view>
					
				</view>
				-->
				
				<view id="view/root/intro/startlogic" class="net.jgf.view.ActionView" 
					autoLoad="true" autoActivate="false" >
					<action ref="logic/action/showmenu" />
				</view>



			</view>

			<view id="view/root/main" class="net.jgf.view.ViewStateNode"
				autoLoad="false" autoActivate="false" >
				
				<view id="view/root/main/background" class="net.jgf.jme.view.display.DisplayItemsView" 
					autoLoad="true" autoActivate="true">
					
					<item id="view/root/main/background/warpigs" class="net.jgf.jme.view.display.ImageItem">
						<center>0.0 0.0 0.0</center>
						<textureUrl>tanks/texture/logo/war-pigs.png</textureUrl>
						<size>1.0</size>
					</item>
						
					<item id="view/root/main/background/tanks" class="net.jgf.jme.view.display.ImageItem">
						<center>-0.5 -0.3 0.0</center>
						<textureUrl>tanks/texture/logo/tanks-logo.png</textureUrl>
						<size>0.50</size>
					</item>
					
					<item id="view/root/main/background/title" class="net.jgf.jme.view.display.TextItem">
						<center>-0.5 -0.6 0.0</center>
						<size>0.1</size>
						<font>Verdana BOLD 40</font>
						<text>T a u n k l e t</text>
					</item>	
						
				</view>
				
				<view id="view/root/main/menu" class="net.jgf.jme.view.menu.DefaultMenuView"
						autoLoad="true" autoActivate="true" >
					<lookAndFeel id="view/root/main/menu/laf" class="net.jgf.jme.view.menu.DefaultMenuLookAndFeel" >
						<origin>0.90 0.6 0.0</origin>
						<size>0.08</size>
						<font>Verdana PLAIN 40</font>
						<align>Right</align>
					</lookAndFeel>
					<initialMenu ref="menu/main" />
				</view>
				
			</view>


			<view id="view/root/level" class="net.jgf.view.ViewStateNode">
			
				<view id="view/root/level/fight" class="net.jgf.view.ViewStateNode"
					autoLoad="true" autoActivate="true" >
					
					
					<!-- 
					<view id="view/root/level/fight/spectator" class="net.jgf.jme.view.FreeCameraView"
						autoLoad="true" autoActivate="true" >
						<sceneManager ref="scene/manager" />
					</view>
					 -->
					 
					<!--  
					<view id="view/root/level/fight/scene" class="net.jgf.jme.view.SceneRenderView"
						autoLoad="true" autoActivate="true" >
						<sceneManager ref="scene/manager" />		
					</view>
					 -->
					
					<view id="view/root/level/fight/effects" class="net.jgf.example.tanks.view.EffectsView"
						autoLoad="true" autoActivate="true" >
					</view>					
					
					<view id="view/root/level/fight/input" class="net.jgf.example.tanks.view.InputView"
						autoLoad="true" autoActivate="true" >
					</view>
					
					<view id="view/root/level/match/skybox" class="net.jgf.jme.view.SkyboxRenderView"
						autoLoad="true" autoActivate="true" >
						<sceneManager ref="scene/manager" />		
					</view>

					<view id="view/root/level/fight/water" class="net.jgf.example.tanks.view.ProjectedWaterView"
						autoLoad="true" autoActivate="true" >
						<sceneManager ref="scene/manager" />		
					</view>
					
					<view id="view/root/level/fight/viewupdate" class="net.jgf.example.tanks.view.TanksView"
						autoLoad="true" autoActivate="true" >
					</view>
					
				</view>

				<view id="view/root/level/failed" class="net.jgf.view.ViewStateNode"
						autoLoad="true" autoActivate="false">

					<view id="view/root/level/failed/banner" class="net.jgf.jme.view.display.DisplayItemsView" 
						autoLoad="true" autoActivate="true">
						
						<item id="view/root/level/failed/banner/background" class="net.jgf.jme.view.display.ImageItem">
							<center>-0.0 0.0 0.0</center>
							<textureUrl>tanks/texture/logo/tech-jme.png</textureUrl>
							<size>0.5</size>
						</item>					
						<item id="view/root/level/failed/banner/text" class="net.jgf.jme.view.display.TextItem">
							<center>-0.0 0.0 0.0</center>
							<size>0.15</size>
							<font>Verdana PLAIN 40</font>
							<text>Mission Failed</text>
							<align>Center</align>
						</item>
						<item id="view/root/level/failed/banner/press" class="net.jgf.jme.view.display.TextItem">
							<center>0.9 -0.9 0.0</center>
							<size>0.05</size>
							<font>Verdana PLAIN 40</font>
							<text>Press SPACE</text>
							<align>BottomRight</align>
						</item>
	
					</view>
					
					<view id="view/root/level/failed/action" class="net.jgf.jme.view.ActionInputView" 
						autoLoad="true" autoActivate="true" >

						<action key="KEY_SPACE" ref="logic/action/restart" />
						
					</view>					
					
				</view>

				<view id="view/root/level/osd" class="net.jgf.jme.view.display.DisplayItemsView" 
					autoLoad="true" autoActivate="true">
					
					<item id="view/root/level/osd/kills" class="net.jgf.jme.view.display.TextItem">
						<center>-0.95 0.95 0.0</center>
						<size>0.05</size>
						<font>Verdana PLAIN 40</font>
						<text>Hits: 0</text>
						<align>TopLeft</align>
					</item>
					<item id="view/root/level/osd/time" class="net.jgf.jme.view.display.TextItem">
						<center>-0.95 0.85 0.0</center>
						<size>0.05</size>
						<font>Verdana PLAIN 40</font>
						<text>Time: 00:00</text>
						<align>TopLeft</align>
					</item>
					<item id="view/root/level/osd/tanks" class="net.jgf.jme.view.display.TextItem">
						<center>-0.95 0.75 0.0</center>
						<size>0.05</size>
						<font>Verdana PLAIN 40</font>
						<text>Tanks: -</text>
						<align>TopLeft</align>
					</item>
					
				</view>		
				
				<view id="view/root/level/grid" class="net.jgf.jme.view.devel.AxisGridView" 
					autoLoad="false" autoActivate="false" >
					<sceneManager ref="scene/manager" />
					<drawBehind>false</drawBehind>
					<center>0.0 0.01 0.0</center>
					<spacing>1</spacing>
				</view>
				 
				<view id="view/root/level/debug" class="net.jgf.jme.view.devel.DebugView" 
					autoLoad="true" autoActivate="true" >
					<sceneManager ref="scene/manager" />
				</view>
				
				<view id="view/root/level/ui/stats/switch" class="net.jgf.jme.view.ToggleInputView" context="debug"
					autoLoad="true" autoActivate="true" >

					<key>KEY_F11</key>
				
					<view id="view/root/level/ui/stats" class="net.jgf.jme.view.devel.StatsView"
						autoLoad="true" autoActivate="false" >
						<graphWidth>1.0</graphWidth>
						<graphHeight>0.20</graphHeight>
						<graphAlpha>0.8</graphAlpha>
					</view>
				
				</view>
			
				<view id="view/root/level/ui/scenemonitor/switch" class="net.jgf.jme.view.ToggleInputView" context="debug"
					autoLoad="true" autoActivate="true" >

					<key>KEY_F12</key>
			
					<!-- <view id="view/root/level/ui/scenemonitor" class="net.jgf.jme.view.devel.SceneMonitorView"
						autoLoad="true" autoActivate="false" context="debug">
						<sceneManager ref="scene/manager" />
						<updateInterval>5</updateInterval>
					</view>  -->
					
					<view id="view/root/level/ui/sceneworker" class="net.jgf.jme.view.devel.SceneWorkerView"
						autoLoad="true" autoActivate="false" context="debug">
						<sceneManager ref="scene/manager" />
						<register ref="view/root" />
						<register ref="view/root/level/grid" />
						<register ref="logic/root" />
					</view>
				
				</view>
		
				
				<view id="view/root/level/cursor" class="net.jgf.jme.view.CursorRenderView"
					autoLoad="true" autoActivate="true" >
					<textureUrl>tanks/texture/cursor.png</textureUrl>
				</view>
				
			</view>				
			
			<!-- Console View state that serves as interface to use the Console system -->
			<view id="view/root/consolekey" class="net.jgf.jme.view.ToggleInputView"
				autoLoad="true" autoActivate="true">

				<key>KEY_TAB</key>

				<view id="view/root/console" class="net.jgf.jme.view.ConsoleView"
					autoLoad="true" autoActivate="true">
					<console ref="console" />
				</view>
				
			</view>
			
		</view>
			
	</service>
	
	<!-- 
		Sound Jukebox Service
	 -->
	<service id="audio" class="net.jgf.jme.audio.SimpleSoundService">
		
		<audio id="audio/shot" class="net.jgf.jme.audio.AudioItem">
			<resourceUrl>tanks/audio/mgun.ogg</resourceUrl>
		</audio>
		
	</service>
	
	<!-- 
		Menu System
	 -->
	<service id="menu" class="net.jgf.menu.DefaultMenuSystem">

		<menu id="menu/main" class="net.jgf.menu.DefaultMenu">
			<item id="menu/newgame/1player" class="net.jgf.menu.items.ActionMenuItem">
				<key>1 Player Missions</key>
				<action ref="logic/action/newgame" />
			</item>
			<item id="menu/newgame/network" class="net.jgf.menu.items.ScreenLinkMenuItem">
				<key>Network Game</key>
				<target ref="menu/newgame/network" />
			</item>
			<item id="menu/main/settings" class="net.jgf.menu.items.ScreenLinkMenuItem">
				<key>Settings</key>
				<target ref="menu/settings" />
			</item>
			<item id="menu/main/quit" class="net.jgf.menu.items.ActionMenuItem">
				<key>Quit</key>
				<action ref="logic/action/quit" />
			</item>
		</menu>

		<menu id="menu/settings" class="net.jgf.menu.DefaultMenu">
			
			<item id="menu/settings/title" class="net.jgf.menu.items.TitleMenuItem">
				<key>Taunklet Settings</key>
			</item>
		
			<item id="menu/settings/sep01" class="net.jgf.menu.items.SeparatorMenuItem" />
		
			<item id="menu/settings/up" class="net.jgf.menu.items.SettingMenuItem">
				<setting ref="input.up" />
			</item>
			<item id="menu/settings/down" class="net.jgf.menu.items.SettingMenuItem">
				<setting ref="input.down" />
			</item>
			<item id="menu/settings/left" class="net.jgf.menu.items.SettingMenuItem">
				<setting ref="input.left" />
			</item>
			<item id="menu/settings/right" class="net.jgf.menu.items.SettingMenuItem">
				<setting ref="input.right" />
			</item>

			<item id="menu/settings/sep02" class="net.jgf.menu.items.SeparatorMenuItem" />

			<item id="menu/settings/back" class="net.jgf.menu.items.ScreenLinkMenuItem">
				<key>Back</key>
				<target ref="menu/main" />
			</item>	
		</menu>

	</service>	
	
	<!-- 
		System Information Service
	 -->
	<service id="systemInfo" class="net.jgf.util.system.SystemInfoService" context="debug">
		<reportInterval>20000</reportInterval>
	</service>
	
</jgf>
 


